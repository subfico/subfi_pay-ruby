=begin
#Bckbn Pay API

#API for Bckbn Pay services

The version of the OpenAPI document: 0.1.0

Generated by: https://openapi-generator.tech
Generator version: 7.7.0

=end

require 'spec_helper'
require 'json'

# Unit tests for BckbnPay::CustomersApi
# Automatically generated by openapi-generator (https://openapi-generator.tech)
# Please update as you see appropriate
describe 'CustomersApi' do
  let(:api_instance) { BckbnPay::CustomersApi.new }
  let(:api_key) { Faker::Alphanumeric.alphanumeric(number: 32) }
  let(:api_version) { "0.1.0" }
  let(:config) do
    api_instance.api_client.config.tap do |c|
      c.api_key['ApiKeyAuth'] = api_key
      c.host = "localhost:3000"
      c.scheme = "http"
    end
  end
  let(:path) { "/customers" }
  let(:request_headers) do
    {
      "Content-Type"  => "application/json",
      'X-Api-Version' => api_version,
      'X-Api-Key' => api_key,
      'Expect' => '',
      'User-Agent' => 'OpenAPI-Generator/0.5.2/ruby'
    }
  end
  let(:response_headers) do
    {
      'Accept'        =>  'application/json',
      "Content-Type"  => "application/json"
    }
  end

  describe 'test an instance of CustomersApi' do
    it 'should create an instance of CustomersApi' do
      expect(api_instance).to be_instance_of(BckbnPay::CustomersApi)
    end
  end

  # unit tests for create_customer
  # Create a new customer
  # @param x_api_version
  # @param create_customer_request
  # @param [Hash] opts the optional parameters
  # @return [Customer]
  describe 'create_customer test' do
    let(:body) do
      {
        customer: {
          name: Faker::Name.name,
          email: Faker::Internet.email
        }
      }
    end

    before do
      stub_request(:post, [config.host, "/customers"].join)
        .with(headers: request_headers, body: body.to_json)
        .to_return(
          status: 200,
          body: fixture("customers/create_201.json"),
          headers: response_headers
        )
    end

    it 'should work' do
      res = api_instance.create_customer(api_version, body)
      expect(res).to be_instance_of(BckbnPay::Customer)
    end
  end

  # unit tests for get_customer
  # Retrieve a customer by ID
  # @param x_api_version
  # @param id
  # @param [Hash] opts the optional parameters
  # @return [Customer]
  describe 'get_customer test' do
    let(:customer_id) { Faker::Alphanumeric.alphanumeric(number: 32) }

    before do
      stub_request(:get, [config.host, "/customers/#{customer_id}"].join)
        .with(headers: request_headers)
        .to_return(
          status: 200,
          body: fixture("customers/show_200.json"),
          headers: response_headers
        )
    end

    it 'should work' do
      res = api_instance.get_customer(api_version, customer_id)
      expect(res).to be_instance_of(BckbnPay::Customer)
    end
  end

  # unit tests for list_customers
  # List all customers
  # @param x_api_version
  # @param [Hash] opts the optional parameters
  # @option opts [Integer] :page The page of results to retrieve.
  # @option opts [Integer] :per_page Number of results per page.
  # @return [ListCustomersResponse]
  describe 'list_customers test' do
    before do
      stub_request(:get, [config.host, "/customers"].join)
        .with(headers: request_headers)
        .to_return(
          status: 200,
          body: fixture("customers/list_200.json"),
          headers: response_headers
        )
    end

    it 'should work' do
      res = api_instance.list_customers(api_version)
      expect(res).to be_instance_of(BckbnPay::ListCustomersResponse)
    end
  end

end
